ุชูุงู โ
ุฅููู ุงููุณุฎุฉ ุงูููุงุฆูุฉ ูู ุงูู **Dockerfile** ูุน ุชุดุบูู ุงูุชุทุจูู ุชููุงุฆููุง ุจุนุฏ ุงูุชููุฆุฉ:

```dockerfile
# Use official Ubuntu as base image
FROM ubuntu:24.04

# Avoid interactive prompts during package installation
ENV DEBIAN_FRONTEND=noninteractive

# Update and install basic packages
RUN apt-get update && \
    apt-get install -y \
    curl \
    wget \
    git \
    vim \
    sudo \
    python3 \
    python3-pip \
    python3-venv \
    build-essential && \
    apt-get clean && rm -rf /var/lib/apt/lists/*

# Set working directory
WORKDIR /app

# Copy local files to container
COPY . /app

# Create Python virtual environment
RUN python3 -m venv venv

# Activate virtual environment, upgrade pip, and install requirements
RUN /bin/bash -c "source venv/bin/activate && \
    pip install --upgrade pip && \
    pip install -r requirements.txt"

# Set environment variable to automatically activate venv
ENV VIRTUAL_ENV=/app/venv
ENV PATH="$VIRTUAL_ENV/bin:$PATH"

# Copy entrypoint script
COPY docker-entrypoint.sh /app/docker-entrypoint.sh
RUN chmod +x /app/docker-entrypoint.sh

ENTRYPOINT ["/app/docker-entrypoint.sh"]

# Run Flask server by default
CMD ["flask", "run", "--host=0.0.0.0", "--port=5000"]
```

---

### ููู `docker-entrypoint.sh`

ุถุนู ูู ููุณ ูุฌูุฏ ุงููุดุฑูุน:

```bash
#!/bin/bash
set -e

echo ">>> Running Flask database migrations..."
flask db init || true
flask db migrate -m "Auto migration" || true
flask db upgrade || true

echo ">>> Creating admin user..."
flask create-admin || true

echo ">>> Starting Flask app..."
exec "$@"
```

---

๐น ุงููุชูุฌุฉ:

* ุนูุฏ ุชุดุบูู ุงูุญุงููุฉ (`docker run`):

  1. ูุนูู `flask db init/migrate/upgrade`.
  2. ูุชู ุฅูุดุงุก ุงููุณุชุฎุฏู admin (ุฅุฐุง ูู ููู ููุฌูุฏูุง).
  3. ูุจุฏุฃ ุงูุณูุฑูุฑ ูุจุงุดุฑุฉ ุนูู `http://localhost:5000`.

ูู ุชุฑูุฏ ููู ุฃู ุฃุนุฏู ุงูุณูุฑุจุช ุจุญูุซ **ูุชุญูู ุฃูููุง ุฅุฐุง ูุงู admin ููุฌูุฏูุง** ูุจู ูุญุงููุฉ ุฅุนุงุฏุฉ ุฅูุดุงุฆูุ ุจุฏู ูุง ูุณุชุฎุฏู `|| true`ุ

ุชูุงู โจ ุฎูููู ุฃุฑุชุจูู ูููููุฉ ูุดุฑูุนู (ุฏุงุฎู ูุฎุงุฑุฌ ุงูุญุงููุฉ) ุจุนุฏ ุฅุถุงูุฉ ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ ููููุงุช ุงูู Docker:

---

## ๐ ูููููุฉ ุงููุดุฑูุน ุนูู ุฌูุงุฒู (ูุจู ุจูุงุก Docker)

```
your-project/
โ
โโโ app/                      # ููุฏ ุงูุชุทุจูู Flask
โ   โโโ __init__.py
โ   โโโ models.py
โ   โโโ routes.py
โ   โโโ forms.py
โ   โโโ ...
โ
โโโ migrations/               # ูููุงุช ุงูุชุฑุญูู (flask db init ููุดุฆูุง)
โ   โโโ ...
โ
โโโ requirements.txt          # ููุชุจุงุช Python
โโโ docker-entrypoint.sh      # ุณูุฑุจุช ุงูุชููุฆุฉ ูุชุดุบูู ุงูุณูุฑูุฑ
โโโ Dockerfile                # ููู ุจูุงุก ุงูุตูุฑุฉ
โโโ README.md
```

---

## ๐ ูููููุฉ ุงููููุงุช ุฏุงุฎู ุงูุญุงููุฉ (ุจุนุฏ ุจูุงุก ูุชุดุบูู Docker)

```
/app/
โ
โโโ app/                      # ููุณ ููุฏ Flask ุงูููุณูุฎ
โ   โโโ __init__.py
โ   โโโ models.py
โ   โโโ routes.py
โ   โโโ forms.py
โ   โโโ ...
โ
โโโ migrations/               # ุชููุดุฃ ุนูุฏ ุฃูู ุชุดุบูู ุงูุญุงููุฉ
โ   โโโ ...
โ
โโโ venv/                     # ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ (Python virtual env)
โ   โโโ bin/
โ   โโโ lib/
โ   โโโ include/
โ   โโโ ...
โ
โโโ requirements.txt
โโโ docker-entrypoint.sh
โโโ (ูููุงุช ุฃุฎุฑู ูุณุฎุชูุง ูู ุฌูุงุฒู)
```

---

## ๐น ููุงุญุธุงุช:

* ูู ูููุงุช ูุดุฑูุนู ุชููุณุฎ ุฅูู `/app` ุฏุงุฎู ุงูุญุงููุฉ ุจุณุจุจ `WORKDIR /app` ู `COPY . /app`.
* ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ ููุฌูุฏุฉ ุฏุงุฎู `/app/venv`.
* ุนูุฏ ุชุดุบูู ุงูุญุงููุฉ:

  * `docker-entrypoint.sh` ูููุฐ ุฃูุงูุฑ **ุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช**.
  * ุจุนุฏูุง ูุจุฏุฃ ุงูุณูุฑูุฑ ุจู `flask run --host=0.0.0.0 --port=5000`.

---

ูู ุชุญุจ ุฃุฑุชุจูู ูููููุฉ ูุญุณููุฉ ุจุญูุซ ูุฎูู **venv ุฎุงุฑุฌ ูุฌูุฏ ุงูููุฏ** (ูุซูุงู ูู `/opt/venv`) ุนูุดุงู ูุง ูุฎุชูุท ูุน ูููุงุช ูุดุฑูุนูุ

ููุชุงุฒ ๐
ุฎูููู ุฃุดุฑุญูู ุฎุทูุฉ ุจุฎุทูุฉ ููู ุชุดุบูู ูุดุฑูุนู ุจุงุณุชุฎุฏุงู ุงูู **Dockerfile** ุงููู ูุชุจูุงู:

---

## 1๏ธโฃ ุชุฌููุฒ ุงููุดุฑูุน

ุชุฃูุฏ ุฃู ุนูุฏู ุงููููุงุช ุงูุชุงููุฉ ูู ุฌุฐุฑ ุงููุดุฑูุน:

```
your-project/
โโโ app/                     # ูุฌูุฏ ููุฏ Flask
โ   โโโ __init__.py
โ   โโโ ...
โโโ requirements.txt         # ููุชุจุงุช Python
โโโ docker-entrypoint.sh     # ุณูุฑุจุช ุงูุชููุฆุฉ
โโโ Dockerfile               # ููู ุงูุจูุงุก
```

ูุชุฃูุฏ ุฃู `docker-entrypoint.sh` ุนูุฏู ุตูุงุญูุงุช ุชูููุฐ:

```bash
chmod +x docker-entrypoint.sh
```

---

## 2๏ธโฃ ุจูุงุก ุงูุตูุฑุฉ (Image)

ูู ุฏุงุฎู ูุฌูุฏ ุงููุดุฑูุน ูููุฐ:

```bash
docker build -t myflaskapp .
```

* `myflaskapp` ูู ุงุณู ุงูุตูุฑุฉ (ูููู ุชุบููุฑู).
* ุงูููุทุฉ `.` ุชุนูู "ุฎุฐ ุงูู Dockerfile ูู ุงููุฌูุฏ ุงูุญุงูู".

---

## 3๏ธโฃ ุชุดุบูู ุงูุญุงููุฉ (Container)

ุดุบูู ุงูุญุงููุฉ ูุงุฑุจุท ุงููููุฐ 5000:

```bash
docker run -it --rm -p 5000:5000 myflaskapp
```

๐น ุงูุชูุณูุฑ:

* `-it` ูุนุทูู ุชูุฑููุงู ุชูุงุนูู.
* `--rm` ููุณุญ ุงูุญุงููุฉ ุจุนุฏ ุฅููุงููุง.
* `-p 5000:5000` ูุฑุจุท ูููุฐ ุงูุญุงููุฉ (5000) ูุน ูููุฐ ุฌูุงุฒู.

---

## 4๏ธโฃ ุงููุตูู ููุชุทุจูู

ุจุนุฏ ุชุดุบูู ุงูุญุงููุฉุ ุงุฐูุจ ูููุชุตูุญ ูุงูุชุญ:

```
http://localhost:5000
```

๐ ุณุชุฑู ุชุทุจูู Flask ุดุบุงู.

---

## 5๏ธโฃ ูุงุฐุง ูุญุฏุซ ุนูุฏ ุงูุชุดุบููุ

ุจูุถู `docker-entrypoint.sh`:

1. ููููุฐ:

   * `flask db init` (ุฅุฐุง ูุง ูู migrations).
   * `flask db migrate -m "Auto migration"`.
   * `flask db upgrade`.
   * `flask create-admin`.
2. ุจุนุฏูุง ูุจุฏุฃ ุงูุณูุฑูุฑ:

   ```
   flask run --host=0.0.0.0 --port=5000
   ```

---

ูู ุชุญุจ ุฃูุชุจูู ุฃูุถูุง ุฃูุงูุฑ **ุชุดุบูู ูุน ูุงุนุฏุฉ ุจูุงูุงุช ุฎุงุฑุฌูุฉ (ูุซู MySQL/Postgres) ุจุงุณุชุฎุฏุงู ูุชุบูุฑุงุช ุจูุฆุฉ ูู Docker** ุจุฏู SQLite ุงูุงูุชุฑุงุถูุ

ุชูุงู โ
ุงูุขู ูุงุฒู ูุนุฏูู ุทุฑููุฉ ุชุดุบูู ุงูุญุงููุฉ ุญุชู:

1. ุชุดุชุบู **ูู ุงูุฎูููุฉ (background / detached mode)**.
2. ูุง ุชูุญุฐู ุจุนุฏ ุงูุฅููุงู (ูุนูู ูู ุบูุฑ `--rm`).
3. ูุญุงูุธ ุนูู **ูุงุนุฏุฉ ุจูุงูุงุช SQLite** ููุฌูุฏุฉ ุญุชู ุจุนุฏ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุญุงููุฉ.

---

## 1๏ธโฃ ุชุดุบูู ุงูุญุงููุฉ ูู ุงูุฎูููุฉ

ุจุฏู:

```bash
docker run -it --rm -p 5000:5000 myflaskapp
```

ุงุณุชุฎุฏู:

```bash
docker run -d --name myflaskapp -p 5000:5000 myflaskapp
```

๐น ุงูุชูุณูุฑ:

* `-d` = ุชุดุบูู ูู ุงูุฎูููุฉ.
* `--name myflaskapp` = ูุนุทู ุงูุญุงููุฉ ุงุณู ุซุงุจุช ุญุชู ููุฏุฑ ูููููุง/ูุดุบููุง ุจุณูููุฉ.
* **ูุง ูู `--rm`** โ ุงูุญุงููุฉ ุชุจูู ููุฌูุฏุฉ ุจุนุฏ ุงูุชููู.

---

## 2๏ธโฃ ุฅุฏุงุฑุฉ ุงูุญุงููุฉ

* ุฅููุงู ุงูุญุงููุฉ:

  ```bash
  docker stop myflaskapp
  ```

* ุชุดุบูููุง ูุฑุฉ ุซุงููุฉ:

  ```bash
  docker start -a myflaskapp
  ```

* ุงูุฏุฎูู ุฏุงุฎู ุงูุญุงููุฉ (ูู ุชุญุจ ุชูุชุญ bash):

  ```bash
  docker exec -it myflaskapp bash
  ```

---

## 3๏ธโฃ ุญูุงูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช SQLite

SQLite ุชุฎุฒู ุงูุจูุงูุงุช ูู ููู ูุซู:

```
/app/instance/app.db
```

(ุงูููุงู ูุนุชูุฏ ุนูู ุฅุนุฏุงุฏ Flask ุนูุฏู).

ูู ุจููุช ุชุณุชุฎุฏู ููุณ ุงูุญุงููุฉ ููู ุชุถูุน ุงูุจูุงูุงุช.
ููู ุงูุฃูุถู ุชุฑุจุท **ูุฌูุฏ ุนูู ุฌูุงุฒู ููุฌูุฏ ุฏุงุฆู (volume)** ุจุญูุซ ุญุชู ูู ูุณุญุช ุงูุญุงููุฉ ุชุธู ูุงุนุฏุฉ ุงูุจูุงูุงุช.

ูุซุงู:

```bash
docker run -d --name myflaskapp \
  -p 5000:5000 \
  -v $(pwd)/data:/app/instance \
  myflaskapp
```

๐น ุงูุขู:

* ูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช SQLite ุชูุญูุธ ูู ุฌูุงุฒู ุฏุงุฎู `./data` (ุจุฌูุงุฑ ุงููุดุฑูุน).
* ุฏุงุฎู ุงูุญุงููุฉ ุชุจูู ูู `/app/instance`.
* ุญุชู ูู ูุณุญุช ุงูุญุงููุฉ ูุจููุชูุง ูู ุฌุฏูุฏ โ ุจูุงูุงุชู ูุง ุชุฑูุญ.

---

ุชุญุจ ุฃุฌูุฒูู ูุณุฎุฉ ูุญุณููุฉ ูู **Dockerfile + docker-entrypoint.sh** ุจุญูุซ ูุถูู ุฃู ูุงุนุฏุฉ ุจูุงูุงุช SQLite ูุญููุธุฉ ุฏูููุง ูู `/app/instance` ููุฑุจูุทุฉ ุจู volume ุฎุงุฑุฌู ุชููุงุฆููุงุ
